@model IEnumerable<ClassicGarage.Models.CarModels>
@using Microsoft.AspNet.Identity
@{
    ViewBag.Title = "My cars";
}

<h2>@ViewBag.Title</h2>

<p>
    @if ((Request.IsAuthenticated))
    {
    <p>
        @Html.ActionLink("Add new car", "Create")
    </p>
}
    <table class="table">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Picture)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Make)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Model)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Year)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.VIN)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Name)
            </th>

            <th>
                @*@Html.DisplayNameFor(model => model.PurchaseDate)*@
                Purchase Date
            </th>
            <th>
                @*@Html.DisplayNameFor(model => model.PurchaseAmount)*@
                Purchase Amount
            </th>

            <th></th>
        </tr>

        @foreach (var item in Model)
        {
            if (item.Owner.Email == User.Identity.GetUserName())
            {
                <tr>
                    <td>
                        <img src="@Url.Content(item.Picture)" alt="" style="width:200px; height:200px;" />
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Make)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Model)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Year)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.VIN)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Name)
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.PurchaseDate)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.PurchaseAmount)
                    </td>



                    <td>

                        <div class="dropdown">
                            <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                                Options
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu">
                                <li>@Html.ActionLink("Edit", "Edit", new { id = item.ID })</li>
                                <li>@Html.ActionLink("Details", "Details", new { id = item.ID })</li>
                                <li>@Html.ActionLink("Delete", "Delete", new { id = item.ID })</li>
                                <li> @Html.ActionLink("Repairs", "Naprawy", new { id = item.ID })</li>
                                <li> @Html.ActionLink("Parts", "Czesci", new { id = item.ID })</li>
                            </ul>
                        </div>



                    </td>


                </tr>
            }
        }

    </table>


